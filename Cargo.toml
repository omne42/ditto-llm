[package]
name = "ditto-llm"
version = "0.1.1"
edition = "2024"
rust-version = "1.85"

[features]
default = ["openai", "anthropic", "openai-compatible", "streaming", "tools", "embeddings"]

# Modules
agent = []
auth = ["dep:hmac", "dep:sha2", "dep:time"]
sdk = []
gateway = ["dep:axum"]
base64 = ["dep:base64"]

# Providers
openai = []
anthropic = []
google = []
openai-compatible = ["openai"]
cohere = []
bedrock = ["auth", "base64"]
vertex = ["auth"]

# Optional capabilities
streaming = []
tools = []
embeddings = []
images = []
audio = []
moderations = []
rerank = []
batches = []

# Bundles
all-providers = ["openai", "anthropic", "google", "openai-compatible", "cohere", "bedrock", "vertex"]
all-capabilities = ["streaming", "tools", "embeddings", "images", "audio", "moderations", "rerank", "batches"]
all = ["all-providers", "all-capabilities"]

integration = []

[dependencies]
async-trait = "0.1"
axum = { version = "0.7", optional = true, features = ["json"] }
base64 = { version = "0.22", optional = true }
bytes = "1"
futures-util = "0.3"
hmac = { version = "0.12", optional = true }
reqwest = { version = "0.12", default-features = false, features = ["json", "multipart", "rustls-tls", "stream"] }
serde = { version = "1", features = ["derive"] }
serde_json = "1"
sha2 = { version = "0.10", optional = true }
thiserror = "1"
time = { version = "0.3", features = ["formatting", "macros"], optional = true }
tokio = { version = "1", features = ["io-util", "macros", "process", "rt", "rt-multi-thread", "net"] }
tokio-util = { version = "0.7", features = ["io"] }

[dev-dependencies]
httpmock = "0.8.2"
tempfile = "3"
toml = "0.8"
tower = { version = "0.5", features = ["util"] }

[[example]]
name = "multimodal"
required-features = ["base64"]
